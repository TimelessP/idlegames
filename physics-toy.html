<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Physics Toy - Idle Game</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <meta name="description" content="A clean, mobile-friendly physics toy idle game with theme support.">
  <style>
    :root {
      --bg: #f5f5f5;
      --fg: #222;
      --accent: #00bcd4;
      --font: 'Segoe UI', 'Arial', 'sans-serif';
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #181818;
        --fg: #eee;
        --accent: #4fc3f7;
      }
    }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: var(--font);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      justify-content: center;
      touch-action: manipulation; /* Prevent default touch behaviors except basic gestures */
    }
    h1 {
      margin-top: 0.5em;
      font-weight: 600;
      letter-spacing: 0.02em;
    }
    .container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: min(90vw, 90vh, 400px);
  height: min(90vw, 90vh, 400px);
  background: var(--accent);
  border-radius: 16px;
  box-shadow: 0 2px 16px rgba(0,0,0,0.08);
  margin: 1em auto;
  position: relative;
  overflow: hidden;
  padding: 12px;
    }
    canvas {
      width: 100%;
      height: 100%;
      display: block;
      border-radius: 16px;
      background: var(--bg);
    }
    .controls {
      margin: 1em 0;
      display: flex;
      gap: 1em;
      justify-content: center;
    }
    button {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.5em 1.2em;
      font-size: 1em;
      font-family: var(--font);
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #008ba3;
    }
  </style>
</head>
<body>
  <h1>Physics Toy</h1>
  <div class="container">
    <canvas id="toy"></canvas>
  </div>
  <div class="controls">
    <button onclick="resetToy()">Reset</button>
    <button onclick="toggleTheme()">Theme</button>
  </div>
  <script>
    const canvas = document.getElementById('toy');
    const container = document.querySelector('.container');
    let theme = localStorage.getItem('theme3') || 'system';
    let balls = [];
    let gravity = 0.25;
    let friction = 0.99;
    let w = 400, h = 400;

    function setTheme(mode) {
      if (mode === 'light') {
        document.documentElement.style.setProperty('--bg', '#f5f5f5');
        document.documentElement.style.setProperty('--fg', '#222');
        document.documentElement.style.setProperty('--accent', '#00bcd4');
      } else if (mode === 'dark') {
        document.documentElement.style.setProperty('--bg', '#181818');
        document.documentElement.style.setProperty('--fg', '#eee');
        document.documentElement.style.setProperty('--accent', '#4fc3f7');
      } else {
        document.documentElement.removeAttribute('style');
      }
      theme = mode;
      localStorage.setItem('theme3', mode);
    }
    function toggleTheme() {
      if (theme === 'system') setTheme('light');
      else if (theme === 'light') setTheme('dark');
      else setTheme('system');
    }
    setTheme(theme);

    function resizeCanvas() {
      w = container.clientWidth;
      h = container.clientHeight;
      canvas.width = w;
      canvas.height = h;
    }
    window.addEventListener('resize', resizeCanvas);

    function randomColor() {
      const colors = ['#00bcd4','#e91e63','#ffeb3b','#4caf50','#ff9800','#2196f3'];
      return colors[Math.floor(Math.random()*colors.length)];
    }
    function createBalls(n=8) {
      balls = [];
      for (let i = 0; i < n; i++) {
        balls.push({
          x: Math.random()*w*0.8 + w*0.1,
          y: Math.random()*h*0.8 + h*0.1,
          r: 24 + Math.random()*16,
          vx: (Math.random()-0.5)*6,
          vy: (Math.random()-0.5)*6,
          color: randomColor()
        });
      }
    }
    function drawBalls(ctx) {
      ctx.clearRect(0,0,w,h);
      for (let b of balls) {
        ctx.beginPath();
        ctx.arc(b.x, b.y, b.r, 0, 2*Math.PI);
        ctx.fillStyle = b.color;
        ctx.globalAlpha = 0.85;
        ctx.fill();
        ctx.globalAlpha = 1;
      }
    }
    function updateBalls() {
      for (let b of balls) {
        b.vy += gravity;
        b.vx *= friction;
        b.vy *= friction;
        b.x += b.vx;
        b.y += b.vy;
        // Bounce off walls
        if (b.x-b.r < 0) { b.x = b.r; b.vx *= -0.8; }
        if (b.x+b.r > w) { b.x = w-b.r; b.vx *= -0.8; }
        if (b.y-b.r < 0) { b.y = b.r; b.vy *= -0.8; }
        if (b.y+b.r > h) { b.y = h-b.r; b.vy *= -0.8; }
      }
      // Ball collisions
      for (let i = 0; i < balls.length; i++) {
        for (let j = i+1; j < balls.length; j++) {
          let a = balls[i], b = balls[j];
          let dx = b.x-a.x, dy = b.y-a.y;
          let dist = Math.sqrt(dx*dx+dy*dy);
          if (dist < a.r+b.r) {
            let angle = Math.atan2(dy,dx);
            let targetX = a.x + Math.cos(angle)*(a.r+b.r);
            let targetY = a.y + Math.sin(angle)*(a.r+b.r);
            let ax = (targetX-b.x)*0.5;
            let ay = (targetY-b.y)*0.5;
            a.vx -= ax; a.vy -= ay;
            b.vx += ax; b.vy += ay;
          }
        }
      }
    }
    function loop() {
      resizeCanvas();
      const ctx = canvas.getContext('2d');
      updateBalls();
      drawBalls(ctx);
      requestAnimationFrame(loop);
    }
    function resetToy() {
      createBalls();
    }
    canvas.addEventListener('click', e => {
      const rect = canvas.getBoundingClientRect();
      const x = (e.clientX-rect.left)/rect.width*w;
      const y = (e.clientY-rect.top)/rect.height*h;
      balls.push({
        x, y,
        r: 20+Math.random()*20,
        vx: (Math.random()-0.5)*8,
        vy: (Math.random()-0.5)*8,
        color: randomColor()
      });
    });
    // Init
    resizeCanvas();
    createBalls();
    loop();
  </script>
<script src="parental.js"></script>
</html>
