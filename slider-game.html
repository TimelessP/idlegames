<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>4x4 Tile Slider - Idle Game</title>
  <meta name="description" content="A clean, mobile-friendly 4x4 tile slider idle game with theme support.">
  <style>
    :root {
      --bg: #f5f5f5;
      --fg: #222;
      --accent: #0078d7;
      --tile-bg: #fff;
      --tile-fg: #222;
      --font: 'Segoe UI', 'Arial', 'sans-serif';
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #181818;
        --fg: #eee;
        --accent: #4fc3f7;
        --tile-bg: #222;
        --tile-fg: #eee;
      }
    }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--fg);
      font-family: var(--font);
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      justify-content: center;
    }
    h1 {
      margin-top: 0.5em;
      font-weight: 600;
      letter-spacing: 0.02em;
    }
    .board {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      grid-template-rows: repeat(4, 1fr);
  gap: 8px;
  width: min(90vw, 90vh, 400px);
  height: min(90vw, 90vh, 400px);
  background: var(--accent);
  border-radius: 16px;
  box-shadow: 0 2px 16px rgba(0,0,0,0.08);
  margin: 1em auto;
  padding: 12px;
    }
    .tile {
      background: var(--tile-bg);
      color: var(--tile-fg);
      font-size: 2em;
      font-weight: 500;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      cursor: pointer;
      user-select: none;
      transition: background 0.2s;
      box-shadow: 0 1px 4px rgba(0,0,0,0.04);
    }
    .tile.empty {
      background: transparent;
      cursor: default;
      box-shadow: none;
    }
    .controls {
      margin: 1em 0;
      display: flex;
      gap: 1em;
      justify-content: center;
    }
    button {
      background: var(--accent);
      color: #fff;
      border: none;
      border-radius: 8px;
      padding: 0.5em 1.2em;
      font-size: 1em;
      font-family: var(--font);
      cursor: pointer;
      transition: background 0.2s;
    }
    button:hover {
      background: #005fa3;
    }
    .solved {
      color: var(--accent);
      font-weight: 600;
      margin-top: 0.5em;
    }
  </style>
</head>
<body>
  <h1>4x4 Tile Slider</h1>
  <div class="board" id="board"></div>
  <div class="controls">
    <button onclick="shuffleBoard()">Shuffle</button>
    <button onclick="resetBoard()">Reset</button>
    <button onclick="toggleTheme()">Theme</button>
  </div>
  <div id="status"></div>
  <script>
    const boardEl = document.getElementById('board');
    const statusEl = document.getElementById('status');
    let board = [];
    let solvedBoard = [];
    let theme = localStorage.getItem('theme') || 'system';

    function setTheme(mode) {
      if (mode === 'light') {
        document.documentElement.style.setProperty('--bg', '#f5f5f5');
        document.documentElement.style.setProperty('--fg', '#222');
        document.documentElement.style.setProperty('--accent', '#0078d7');
        document.documentElement.style.setProperty('--tile-bg', '#fff');
        document.documentElement.style.setProperty('--tile-fg', '#222');
      } else if (mode === 'dark') {
        document.documentElement.style.setProperty('--bg', '#181818');
        document.documentElement.style.setProperty('--fg', '#eee');
        document.documentElement.style.setProperty('--accent', '#4fc3f7');
        document.documentElement.style.setProperty('--tile-bg', '#222');
        document.documentElement.style.setProperty('--tile-fg', '#eee');
      } else {
        document.documentElement.removeAttribute('style');
      }
      theme = mode;
      localStorage.setItem('theme', mode);
    }
    function toggleTheme() {
      if (theme === 'system') setTheme('light');
      else if (theme === 'light') setTheme('dark');
      else setTheme('system');
    }
    setTheme(theme);

    function createSolvedBoard() {
      let arr = [];
      for (let i = 1; i <= 15; i++) arr.push(i);
      arr.push(0);
      return arr;
    }
    function renderBoard() {
      boardEl.innerHTML = '';
      for (let i = 0; i < 16; i++) {
        const val = board[i];
        const tile = document.createElement('div');
        tile.className = 'tile' + (val === 0 ? ' empty' : '');
        tile.textContent = val === 0 ? '' : val;
        tile.onclick = () => moveTile(i);
        boardEl.appendChild(tile);
      }
      if (isSolved()) {
        statusEl.innerHTML = '<span class="solved">Solved! ðŸŽ‰</span>';
      } else {
        statusEl.textContent = '';
      }
    }
    function moveTile(idx) {
      const emptyIdx = board.indexOf(0);
      const valid = [emptyIdx-1, emptyIdx+1, emptyIdx-4, emptyIdx+4].filter(i => i >= 0 && i < 16);
      if (valid.includes(idx) &&
          ((Math.abs(idx-emptyIdx) === 1 && Math.floor(idx/4) === Math.floor(emptyIdx/4)) ||
           Math.abs(idx-emptyIdx) === 4)) {
        [board[emptyIdx], board[idx]] = [board[idx], board[emptyIdx]];
        renderBoard();
      }
    }
    function isSolved() {
      for (let i = 0; i < 16; i++) {
        if (board[i] !== solvedBoard[i]) return false;
      }
      return true;
    }
    function shuffleBoard() {
      board = solvedBoard.slice();
      // Make random valid moves to ensure solvability
      let emptyIdx = 15;
      for (let i = 0; i < 200; i++) {
        const moves = [emptyIdx-1, emptyIdx+1, emptyIdx-4, emptyIdx+4].filter(j =>
          j >= 0 && j < 16 &&
          ((Math.abs(j-emptyIdx) === 1 && Math.floor(j/4) === Math.floor(emptyIdx/4)) ||
           Math.abs(j-emptyIdx) === 4)
        );
        const move = moves[Math.floor(Math.random()*moves.length)];
        [board[emptyIdx], board[move]] = [board[move], board[emptyIdx]];
        emptyIdx = move;
      }
      renderBoard();
    }
    function resetBoard() {
      board = solvedBoard.slice();
      renderBoard();
    }
    // Init
    solvedBoard = createSolvedBoard();
    resetBoard();
  </script>
</html>
