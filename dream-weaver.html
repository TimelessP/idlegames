<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dream Weaver</title>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      font-family: 'Georgia', 'Times New Roman', serif;
      background: linear-gradient(180deg, #2c1810 0%, #4a2c1a 50%, #6b4226 100%);
      color: #f5e6d3;
    }
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .container {
      width: 100%;
      max-width: 400px;
      padding: 1rem;
      box-sizing: border-box;
      background: rgba(43, 24, 16, 0.9);
      border-radius: 1rem;
      box-shadow: 0 0 20px rgba(245, 230, 211, 0.2);
      display: flex;
      flex-direction: column;
      align-items: center;
      border: 1px solid rgba(245, 230, 211, 0.3);
    }
    .loom {
      font-size: 3rem;
      margin: 1rem 0;
      text-align: center;
      animation: weave 4s ease-in-out infinite;
    }
    @keyframes weave {
      0%, 100% { transform: rotateY(0deg); }
      50% { transform: rotateY(180deg); }
    }
    .stats {
      font-size: 1.1rem;
      margin-bottom: 1rem;
      text-align: center;
      line-height: 1.6;
    }
    .upgrades {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }
    .upgrade-btn {
      background: rgba(139, 69, 19, 0.7);
      border: 1px solid rgba(245, 230, 211, 0.3);
      border-radius: 0.5rem;
      padding: 0.75rem 1rem;
      font-size: 1rem;
      color: #f5e6d3;
      cursor: pointer;
      transition: all 0.3s;
      outline: 2px solid transparent;
    }
    .upgrade-btn:hover {
      background: rgba(139, 69, 19, 0.9);
      box-shadow: 0 0 10px rgba(245, 230, 211, 0.4);
    }
    .upgrade-btn:disabled {
      background: rgba(50, 50, 50, 0.5);
      color: #666;
      cursor: not-allowed;
      border-color: rgba(100, 100, 100, 0.3);
    }
    .upgrade-btn:focus {
      outline: 2px solid rgba(245, 230, 211, 0.6);
    }
    .stories {
      margin-top: 1rem;
      text-align: center;
      max-height: 100px;
      overflow-y: auto;
      padding: 0.5rem;
      background: rgba(0, 0, 0, 0.3);
      border-radius: 0.5rem;
      width: 100%;
      box-sizing: border-box;
    }
    .dream-realm {
      margin: 1rem 0;
      font-size: 1.5rem;
      text-align: center;
      min-height: 60px;
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
    }
    @media (max-width: 500px) {
      .container {
        max-width: 98vw;
        padding: 0.5rem;
      }
      .loom {
        font-size: 2rem;
      }
    }
  </style>
</head>
<body>
  <main class="container" role="main">
    <h1 id="game-title">üåô Dream Weaver</h1>
    <div class="loom" aria-label="Dream Loom">
      üßµ‚ú®
    </div>
    <div class="stats" aria-live="polite">
      Dreams: <span id="dreams">0</span><br>
      Stories Woven: <span id="stories">0</span><br>
      Dreams/sec: <span id="dps">1</span>
    </div>
    
    <div class="dream-realm" id="dream-realm" aria-label="Dream Realm"></div>
    
    <section class="upgrades" aria-label="Dream Upgrades">
      <button class="upgrade-btn" id="upgrade-dreams" disabled>
        Enhance Dream Flow (Cost: <span id="upgrade-dreams-cost">15</span> dreams)
      </button>
      <button class="upgrade-btn" id="upgrade-weave" disabled>
        Weave Story (Cost: <span id="upgrade-weave-cost">30</span> dreams)
      </button>
      <button class="upgrade-btn" id="upgrade-realm" disabled>
        Expand Dream Realm (Cost: <span id="upgrade-realm-cost">50</span> stories)
      </button>
    </section>
    
    <div class="stories" id="stories-list" aria-label="Woven Stories">
      No stories woven yet...
    </div>
  </main>
  
  <script>
    let dreams = 0;
    let stories = 0;
    let dreamsPerSec = 1;
    let upgradeDreamsCost = 15;
    let upgradeWeaveCost = 30;
    let upgradeRealmCost = 50;
    let realms = [];
    
    const storyTypes = [
      "‚ú® A tale of forgotten memories", "üåô Journey through starlit dreams", 
      "üßµ Threads of destiny intertwined", "üåå Adventures in the mind's eye",
      "üí´ Whispers of the subconscious", "üå† Dreams of distant worlds",
      "ü¶ã Metamorphosis in slumber", "üåü Visions of infinite possibilities"
    ];
    
    const dreamsEl = document.getElementById('dreams');
    const storiesEl = document.getElementById('stories');
    const dpsEl = document.getElementById('dps');
    const upgradeDreamsCostEl = document.getElementById('upgrade-dreams-cost');
    const upgradeWeaveCostEl = document.getElementById('upgrade-weave-cost');
    const upgradeRealmCostEl = document.getElementById('upgrade-realm-cost');
    const dreamRealmEl = document.getElementById('dream-realm');
    const storiesListEl = document.getElementById('stories-list');
    const upgradeDreamsBtn = document.getElementById('upgrade-dreams');
    const upgradeWeaveBtn = document.getElementById('upgrade-weave');
    const upgradeRealmBtn = document.getElementById('upgrade-realm');
    
    function updateUI() {
      dreamsEl.textContent = dreams;
      storiesEl.textContent = stories;
      dpsEl.textContent = dreamsPerSec;
      upgradeDreamsCostEl.textContent = upgradeDreamsCost;
      upgradeWeaveCostEl.textContent = upgradeWeaveCost;
      upgradeRealmCostEl.textContent = upgradeRealmCost;
      
      upgradeDreamsBtn.disabled = dreams < upgradeDreamsCost;
      upgradeWeaveBtn.disabled = dreams < upgradeWeaveCost;
      upgradeRealmBtn.disabled = stories < upgradeRealmCost || realms.length >= 8;
      
      // Update dream realm display
      const realmIcons = ['üåô', '‚≠ê', 'üåå', 'ü¶ã', 'üí´', 'üå†', '‚ú®', 'üßµ'];
      dreamRealmEl.innerHTML = realmIcons.slice(0, realms.length).join('');
      
      // Update stories list
      if (stories === 0) {
        storiesListEl.textContent = "No stories woven yet...";
      } else {
        const recentStories = storyTypes.slice(0, stories);
        storiesListEl.innerHTML = recentStories.join('<br>');
      }
    }
    
    upgradeDreamsBtn.addEventListener('click', () => {
      if (dreams >= upgradeDreamsCost) {
        dreams -= upgradeDreamsCost;
        dreamsPerSec++;
        upgradeDreamsCost = Math.floor(upgradeDreamsCost * 1.7);
        updateUI();
      }
    });
    
    upgradeWeaveBtn.addEventListener('click', () => {
      if (dreams >= upgradeWeaveCost) {
        dreams -= upgradeWeaveCost;
        stories++;
        upgradeWeaveCost = Math.floor(upgradeWeaveCost * 1.8);
        updateUI();
      }
    });
    
    upgradeRealmBtn.addEventListener('click', () => {
      if (stories >= upgradeRealmCost && realms.length < 8) {
        stories -= upgradeRealmCost;
        realms.push('realm');
        upgradeRealmCost = Math.floor(upgradeRealmCost * 2.2);
        updateUI();
      }
    });
    
    // Passive dream generation
    setInterval(() => {
      dreams += dreamsPerSec;
      updateUI();
    }, 1000);
    
    // Random dream events
    setInterval(() => {
      if (Math.random() < 0.15 && stories > 0) {
        dreams += Math.floor(Math.random() * stories) + 1;
        updateUI();
      }
    }, 3000);
    
    // Initial UI
    updateUI();
  </script>
</body>
</html>
