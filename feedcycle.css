/* Feed Cycle v2 â€“ Flat High-Contrast UI */
/* Design tokens (flattened: no gradients, no shadows) */
:root{--bg:#101317;--surface:#181c23;--surface-alt:#1d222b;--border:#303845;--border-strong:#4a5563;--text:#e6e9ef;--muted:#8f97a4;--primary:#53aaff;--accent:#34d399;--danger:#f87171;--radius:14px;--focus-color:color-mix(in srgb,var(--primary) 85%, white 0%);--focus-ring:0 0 0 3px color-mix(in srgb,var(--primary) 55%, transparent)}
:root[data-theme=light]{--bg:#f5f7fa;--surface:#ffffff;--surface-alt:#f1f4f8;--border:#c9d1db;--border-strong:#9aa6b4;--text:#1d2734;--muted:#606b77;--primary:#1e76ed;--accent:#059669;--danger:#dc2626}
@media (prefers-color-scheme:light){:root[data-theme=system]{--bg:#f5f7fa;--surface:#ffffff;--surface-alt:#f1f4f8;--border:#c9d1db;--border-strong:#9aa6b4;--text:#1d2734;--muted:#606b77;--primary:#1e76ed;--accent:#059669;--danger:#dc2626}}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;font:17px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text);-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;overflow:hidden}
[class~=visually-hidden]{position:absolute!important;width:1px!important;height:1px!important;padding:0!important;margin:-1px!important;overflow:hidden!important;clip:rect(0 0 0 0)!important;white-space:nowrap!important;border:0!important}
/* Icon system */
/* Scale steps: base 1em text -> primary icon 1.35em, icon-only 1.55em (rough golden ratio 1.618 softened) */
.icon{width:1.35em;height:1.35em;display:inline-block;vertical-align:middle;fill:currentColor;flex-shrink:0}
.btn-icon-only{padding:.6rem .6rem;display:inline-flex;align-items:center;justify-content:center}
.btn-icon-only .icon{width:1.55em;height:1.55em}
/* Denser icon sizing for compact toolbar rows */
.mp-row.top .icon{width:1.25em;height:1.25em}
[hidden]{display:none !important}
button,input,select,textarea{font:inherit;color:inherit}
button{cursor:pointer;background:var(--surface-alt);color:var(--text);border:2px solid var(--border-strong);border-radius:14px;padding:.78rem 1.05rem;min-height:52px;min-width:52px;display:inline-flex;align-items:center;gap:.75rem;font-size:.95rem;font-weight:600;letter-spacing:.22px;line-height:1}
button:disabled{opacity:.5;cursor:not-allowed}
button:hover:not(:disabled){background:var(--surface);filter:none}
button:not(.cue-btn):active:not(:disabled){transform:translateY(1px)}
a{text-decoration:none;color:var(--primary)}
a:hover{text-decoration:underline}
:where(a,button,input,select,textarea,[role=button]):focus-visible{outline:2px solid var(--focus-color);outline-offset:2px;border-radius:10px;box-shadow:var(--focus-ring)}
.skip-link{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
.skip-link:focus{left:1rem;top:1rem;width:auto;height:auto;background:var(--primary);color:#fff;padding:.5rem .75rem;border-radius:8px;z-index:500}
.fc-header{display:flex;align-items:center;justify-content:space-between;padding:.65rem 1rem;background:var(--surface);border-bottom:2px solid var(--border-strong);position:sticky;top:0;z-index:40}
.brand{display:flex;align-items:center;gap:.75rem}
.app-title{font-size:1.35rem;margin:0;font-weight:600;letter-spacing:.3px}
.version{font-size:.75rem;opacity:.82;padding:.25rem .6rem;border:2px solid var(--border-strong);border-radius:999px;font-weight:600;background:var(--surface-alt);letter-spacing:.35px}
.primary-actions{display:flex;align-items:center;gap:.5rem}
.icon-btn{min-width:40px}
.media-player{background:var(--surface);border-bottom:2px solid var(--border-strong);padding:.65rem 1rem;display:flex;flex-direction:column;gap:.55rem;position:sticky;top:70px;z-index:35;font-size:.85rem}
.mp-row{display:flex;align-items:center;gap:.5rem}
.mp-row.top button{min-height:auto;padding:.35rem .55rem;font-size:.7rem}
progress{width:100%;height:10px;border-radius:6px;overflow:hidden;background:var(--border-strong)}
progress::-webkit-progress-bar{background:var(--border-strong)}
progress::-webkit-progress-value{background:var(--primary)}
progress::-moz-progress-bar{background:var(--primary)}
.mp-time{font-variant-numeric:tabular-nums;min-width:4ch;text-align:right}
/* New cue variable skip control */
.cue-row{display:flex;align-items:center;gap:.75rem}
.cue-track{position:relative;flex:1;height:46px;background:var(--border-strong);background-size:100% 3px;background-repeat:no-repeat;background-position:center;touch-action:none}
.cue-track.dragging::after{content:"";position:absolute;inset:0;background:var(--primary);opacity:.1;pointer-events:none}
.cue-btn{position:absolute;left:50%;top:50%;transform:translate(calc(-50% + var(--dx,0px)),-50%);width:54px;height:54px;border-radius:50%;border:3px solid var(--primary);background:var(--surface-alt);color:var(--text);cursor:grab;font-size:1.05rem;display:flex;align-items:center;justify-content:center;transition:background .12s,border-color .12s,transform .1s}
.cue-btn:hover{background:var(--surface)}
.cue-btn.dragging{background:var(--primary);color:#fff}
.cue-btn:active{cursor:grabbing}
.cue-btn:focus{outline:2px solid var(--primary);outline-offset:2px}
.app-main{padding:0 0 4rem}
.panel-stack{position:fixed;left:0;right:0;top:var(--stackOffset,140px);bottom:0;display:flex;flex-direction:column;overflow:hidden;z-index:10}
.panel{background:var(--surface);border:0;border-radius:0;margin:0;max-width:none;display:flex;flex-direction:column;position:absolute;inset:0}
.panel-bar{display:flex;align-items:center;gap:.75rem;padding:.85rem 1.15rem;border-bottom:2px solid var(--border-strong);background:var(--surface-alt);border-radius:0}
.panel-bar h2{flex:1;margin:0;font-size:1.22rem;font-weight:650;letter-spacing:.3px}
.panel-body{padding:1.2rem 1.35rem 2.5rem;display:flex;flex-direction:column;gap:1.05rem;overflow-y:auto;overscroll-behavior:contain;-webkit-overflow-scrolling:touch}
.panel-body.list{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:1.15rem;align-content:start;padding:1.2rem 1.35rem 4rem}
.menu-list{list-style:none;margin:0;padding:0;display:grid;gap:.55rem}
.menu-list li{margin:0}
.actions-col{display:flex;flex-direction:column;gap:.6rem}
.subs-list{display:flex;flex-direction:column;gap:.65rem}
.muted{color:color-mix(in srgb,var(--muted) 68%,var(--text) 32%);font-size:.82rem}
.row{display:flex;gap:.6rem;align-items:center}
.subs-list .row{align-items:center !important;padding:.4rem .2rem;border-bottom:1px solid var(--border);}
.subs-list .row:last-child{border-bottom:none}
.subs-list .row strong{flex:1;min-width:180px;display:flex;align-items:center;line-height:1.2}
.subs-actions{display:flex;gap:.4rem;align-items:center}
.card{background:var(--surface-alt);border:2px solid var(--border);border-radius:14px;padding:1.05rem;display:flex;flex-direction:column;gap:.6rem;position:relative}
.card:hover{border-color:var(--border-strong)}
.card.unread{outline:3px solid color-mix(in srgb,var(--primary) 65%, transparent);outline-offset:0}
.card.read{opacity:.88}
.card-media{width:calc(100% + 2.1rem);margin:-1.05rem -1.05rem .55rem -1.05rem;aspect-ratio:16/9;overflow:hidden;border-radius:12px 12px 10px 10px;background:#05070a;display:flex;align-items:center;justify-content:center}
.card-media img{width:100%;height:100%;object-fit:cover;display:block;background:#05070a}
.card h3{margin:.1rem 0;font-size:1.12rem;line-height:1.35;font-weight:600;letter-spacing:.25px}
.card .meta{font-size:.8rem;color:color-mix(in srgb,var(--muted) 70%,var(--text) 30%);display:flex;gap:.6rem;flex-wrap:wrap;font-weight:500}
.card .excerpt{font-size:.9rem;line-height:1.45;opacity:.98;max-height:5.4em;overflow:hidden}
.card .tags{display:flex;gap:.3rem;flex-wrap:wrap}
.chips{display:flex;flex-wrap:wrap;gap:.4rem;margin:-.15rem 0 .15rem}
.chips .chips{margin:0;gap:.4rem}
.chip{background:color-mix(in srgb,var(--primary) 20%, var(--surface));border:2px solid color-mix(in srgb,var(--primary) 55%, var(--border));color:var(--text);padding:.25rem .65rem;border-radius:999px;font-size:.65rem;line-height:1;font-weight:650;letter-spacing:.4px;cursor:pointer;display:inline-flex;align-items:center;gap:.35rem;min-height:auto}
.chip:hover{background:color-mix(in srgb,var(--primary) 32%, var(--surface-alt))}
.chip:focus-visible{outline:2px solid var(--focus-color);outline-offset:2px}
.chip.cat-chip{background:color-mix(in srgb,var(--accent) 25%, var(--surface));border-color:color-mix(in srgb,var(--accent) 65%, var(--border))}
.chip.cat-chip:hover{background:color-mix(in srgb,var(--accent) 38%, var(--surface-alt))}
.tag{background:color-mix(in srgb,var(--accent) 26%,var(--surface));border:2px solid color-mix(in srgb,var(--accent) 70%,var(--border));padding:.28rem .7rem;border-radius:999px;font-size:.72rem;font-weight:650;letter-spacing:.3px}
.fav{position:absolute;top:.55rem;right:.55rem;background:var(--surface);border:2px solid var(--border-strong);font-size:1.15rem;border-radius:12px;padding:.42rem;color:var(--muted);transition:background .15s,border-color .15s,color .15s}
.fav:hover{background:var(--surface-alt);color:var(--text)}
.fav[aria-pressed=true]{color:#f9b938}
.back-btn{background:transparent;border:2px solid var(--border-strong)}
.danger{background:color-mix(in srgb,var(--danger) 32%,var(--surface));border:2px solid color-mix(in srgb,var(--danger) 70%,var(--border));font-weight:650}
.empty{padding:2rem;text-align:center;color:var(--muted)}
/* Form styling */
form#subEditForm{display:flex;flex-direction:column;gap:1.2rem;max-width:640px}
form#subEditForm fieldset{border:2px solid var(--border-strong);border-radius:12px;padding:1rem 1.1rem;display:flex;flex-direction:column;gap:.85rem}
form#subEditForm legend{padding:0 .4rem;font-size:.8rem;font-weight:650;letter-spacing:.15rem;text-transform:uppercase;color:var(--muted)}
form#subEditForm label{display:flex;flex-direction:column;gap:.35rem;font-weight:550;font-size:.85rem}
form#subEditForm input, form#subEditForm select{background:var(--surface-alt);border:2px solid var(--border);color:var(--text);padding:.65rem .75rem;border-radius:10px;font:inherit}
form#subEditForm input:focus, form#subEditForm select:focus{outline:2px solid var(--focus-color);outline-offset:2px}
.form-actions{display:flex;gap:.75rem;margin-top:.25rem}
.form-actions button{flex:0 0 auto}
/* Transitions for panels */
/* Remove entrance animation in flat style to reduce motion & keep immediacy */
.panel{animation:none}
@media (max-width:800px){.panel{margin:0}.media-player{top:54px}.fc-header{flex-wrap:wrap;gap:.5rem}.panel-body.list{grid-template-columns:repeat(auto-fill,minmax(240px,1fr));padding:1rem .9rem 4.5rem}}
@media (prefers-reduced-motion:reduce){*{animation-duration:.01ms !important;animation-iteration-count:1 !important;transition-duration:.01ms !important}}
/* Forced colors adjustments for Windows High Contrast Mode */
@media (forced-colors:active){:root{--focus-color:Highlight}body{forced-color-adjust:auto}button,.panel,.card,.media-player,.fc-header{border:2px solid ButtonText}.cue-btn{border-color:Highlight}:where(a,button,input,select,textarea,[role=button]):focus-visible{outline:2px solid Highlight;box-shadow:none}}
